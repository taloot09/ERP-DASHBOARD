<div class="col-lg-5">
    <div class="col-rt-3 equal-height">
        <div class="sb-example-3">
            <div class="search__container" style="position: relative;">
                <input class="search__input" type="text" id="search-input" placeholder="Search">
                <div id="search-results" class="search__results"></div>
            </div>
        </div>
    </div>
</div>

<style>
    .search__results {
        position: absolute;
        background: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;
        max-height: 200px;
        overflow-y: auto;
        width: 100%;
        display: none;
        z-index: 1000;
    }

    .search__results p {
        padding: 10px;
        margin: 0;
        cursor: pointer;
    }

    .search__results p:hover {
        background-color: #f0f0f0;
    }
</style>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
 $(document).ready(function() {
    $('#search-input').on('input', function() {
        var query = $(this).val();
        if (query.length > 0) {
            $.ajax({
                url: "{% url 'search' %}",
                data: {'q': query},
                dataType: 'json',
                success: function(data) {
                    var results = '';
                    if (data.length > 0) {
                        data.forEach(function(item) {
                            results += '<p><a href="' + item.url + '">' + item.name + ' (' + item.model + ')</a></p>';
                        });
                        $('#search-results').html(results).show();
                    } else {
                        $('#search-results').html('<p>No results found</p>').show();
                    }
                },
                error: function(xhr, status, error) {
                    console.error("Search error:", status, error);
                    $('#search-results').html('<p>Error retrieving results</p>').show();
                }
            });
        } else {
            $('#search-results').hide();
        }
    });

    $(document).on('click', function(e) {
        if (!$(e.target).closest('.search__container').length) {
            $('#search-results').hide();
        }
    });

    $('#search-results').on('click', 'a', function() {
        $('#search-results').hide();
    });
});
</script>
